title: $:/plugins/linonetwo/title-caption/view/toolbar/ApplyCaptionToTitle
tags: $:/tags/ViewToolbar
caption: {{$:/plugins/linonetwo/title-caption/view/toolbar/icon-caption-to-title}} <<lingo ApplyCaptionToTitle $:/plugins/linonetwo/title-caption/language/>>
description: <<lingo ApplyCaptionToTitleDescription $:/plugins/linonetwo/title-caption/language/>>

\whitespace trim
\define lingo-base() $:/plugins/linonetwo/title-caption/language/

<$wikify name="ApplyCaptionToTitle" text="<<lingo ApplyCaptionToTitle>>" mode="inline">
  <%if [<currentTiddler>] :cascade[all[shadows+tiddlers]tag[$:/tags/EditCaptionTemplateTitleFilter]!is[draft]get[text]] +[!is[blank]] %>
    <$button tooltip=<<ApplyCaptionToTitle>> aria-label=<<ApplyCaptionToTitle>> class=<<tv-config-toolbar-class>> >
      <$let oldTitle=<<currentTiddler>> newTitle={{!!caption}}>
        <$action-setfield $tiddler=<<currentTiddler>> $field="caption" $value="" />
        <$action-sendmessage $message="tm-rename-tiddler" from=<<oldTitle>> to=<<newTitle>> />
        <$action-sendmessage $message="tm-relink-tiddler" from=<<oldTitle>> to=<<newTitle>> />
      </$let>

      <$list filter="[<tv-config-toolbar-icons>match[yes]]">
        {{$:/plugins/linonetwo/title-caption/view/toolbar/icon-caption-to-title}}
      </$list>
      <$list filter="[<tv-config-toolbar-text>match[yes]]">
        <span class="tc-btn-text">
          <$text text=<<ApplyCaptionToTitle>>/>
        </span>
      </$list>
    </$button>
  <%endif%>
</$wikify>